<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
xmlns:h="http://xmlns.jcp.org/jsf/html"
xmlns:f="http://xmlns.jcp.org/jsf/core">

	<ui:composition template="/WEB-INF/templates/default.xhtml">

		<ui:define name="content">
			<div class="section no-pad-top">
				<div class="section #{style.colorPrimaryBase}">
					<h1 class="header center #{style.textColorPrimary}">Modify Vote
					Group</h1>
					<ui:fragment
					rendered="#{ModifyVoteGroupController.voteGroup != null}">
						<h5 class="header center #{style.textColorPrimary}">Current
						Vote Group ID: #{ModifyVoteGroupController.voteGroup.id}</h5>
					</ui:fragment>
					<ui:fragment
					rendered="#{ModifyVoteGroupController.voteGroup == null}">
						<h5 class="header center #{style.textColorPrimary}">Current No
						Vote Group Selected for Editing!</h5>
					</ui:fragment>
				</div>
				<br />

				<div class="container">
					<h:panelGroup id="contestants">
						<ui:fragment
						rendered="#{ModifyVoteGroupController.voteGroup != null}">
							<div class="row">
								<ui:repeat
								value="#{ModifyVoteGroupController.voteGroup.contestants}"
								var="contestant">
									<div class="col s6">
										<div class="card">
											<h:form id="contestantEditForm">
												<div class="card-image">
													<h:graphicImage
													value="/resources/contestant_images/#{contestant.pictureFileName}" />
												</div>
												<div class="card-content">

													<!-- Rendered if the Contestant currently being edited is not this Contestant. -->
													<ui:fragment
													rendered="#{ModifyVoteGroupController.contestantIdBeingEdited != contestant.id}">
														<span class="card-title">#{contestant.firstName}
															#{contestant.lastName}</span>
													</ui:fragment>

													<!-- Rendered if the Contestant currently being edited IS this Contestant. -->
													<ui:fragment
													rendered="#{ModifyVoteGroupController.contestantIdBeingEdited == contestant.id}">
														<div class="input-field col s6">
															<h:inputText id="firstNameTextField"
															value="#{ModifyVoteGroupController.editableFirstName}" />
														</div>
														<div class="input-field col s6">
															<h:inputText id="lastNameTextField"
															value="#{ModifyVoteGroupController.editableLastName}" />
														</div>
													</ui:fragment>

												</div>
												<div class="card-action">

													<!-- Rendered if the Contestant currently being edited is not this Contestant. -->
													<ui:fragment
													rendered="#{ModifyVoteGroupController.contestantIdBeingEdited != contestant.id}">
														<h:commandLink class="#{style.colorPrimaryText}"
														action="#{ModifyVoteGroupController.onEditButtonFired(contestant.id)}">
															<i class="material-icons">mode_edit</i>
															<f:ajax render=":contestants" />
														</h:commandLink>
														<div class="#{style.colorPrimaryText} file-field input-field">
															<h:inputFile value="#{ModifyVoteGroupController.pictureUpload}"
																	validator="#{ModifyVoteGroupController.validateImage}">
															</h:inputFile>
															<h:commandLink action="#{ModifyVoteGroupController.upload(contestant)}">
																<i class="material-icons">perm_media</i>
																<f:ajax render=":contestants" />
															</h:commandLink>
															
														</div>
													</ui:fragment>

													<!-- Rendered if the Contestant currently being edited IS this Contestant. -->
													<ui:fragment
													rendered="#{ModifyVoteGroupController.contestantIdBeingEdited == contestant.id}">
														<h:commandLink class="#{style.colorPrimaryText}"
														action="#{ModifyVoteGroupController.onEditDoneButtonFired}">
															<i class="material-icons">done</i>
															<f:ajax execute="firstNameTextField lastNameTextField"
															render=":contestants" />
														</h:commandLink>
														<h:message for="contestantEditForm" style="color: red" />
													</ui:fragment>

												</div>
											</h:form>
										</div>
									</div>
								</ui:repeat>
								<div class="col s6">
									<h:form>
										<h:commandLink value="Add New Contestant"
										styleClass="waves-effect waves-light btn #{style.colorPrimary}"
										action="#{ModifyVoteGroupController.addNewContestant()}">
											<i class="material-icons right">add</i>
											<f:ajax render=":contestants" />
										</h:commandLink>
									</h:form>
								</div>
							</div>
						</ui:fragment>
					</h:panelGroup>
				</div>
			</div>

		</ui:define>

	</ui:composition>
</html>
